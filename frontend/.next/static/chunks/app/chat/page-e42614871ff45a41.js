(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{419:function(e,t,a){Promise.resolve().then(a.bind(a,2861))},2861:function(e,t,a){"use strict";a.d(t,{ChatAssistant:function(){return m}});var r=a(7821),n=a(8078),s=a(7346),c=a(7414),l=a(6576);let o=(0,l.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),i=(0,l.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=a(7737),u=a(3892);let h=e=>e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code class="bg-neutral-900/50 px-1 py-0.5 rounded text-accent-400 text-xs font-mono">$1</code>').replace(/\n/g,"<br />").replace(/&(?!amp;|lt;|gt;|quot;|#)/g,"&amp;");function m(e){let{className:t}=e,[a,l]=(0,n.useState)([{id:"1",role:"assistant",content:"Oi! \uD83D\uDC4B Sou o assistente de IA do Davi Dobbs. Estou aqui para ajudar voc\xea com d\xfavidas sobre IA aplicada, engenharia de software, consultoria ou qualquer coisa relacionada ao trabalho dele. O que voc\xea gostaria de saber?",timestamp:new Date}]),[m,x]=(0,n.useState)(""),[f,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(null),y=(0,n.useRef)(null),v=(0,n.useRef)(null),j=()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{j()},[a]);let w=async()=>{var e,t;if(!m.trim()||f)return;let r={id:Date.now().toString(),role:"user",content:m.trim(),timestamp:new Date};l(e=>[...e,r]),x(""),p(!0),b(null);try{let t=a.map(e=>({role:e.role,content:e.content})),n=await fetch("".concat("http://localhost:3001","/api/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r.content,conversationHistory:t})});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error((null===(e=t.error)||void 0===e?void 0:e.message)||"Erro ao processar mensagem")}let s=await n.json(),c={id:(Date.now()+1).toString(),role:"assistant",content:s.message,timestamp:new Date};l(e=>[...e,c])}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";b(e);let t={id:(Date.now()+1).toString(),role:"assistant",content:"Desculpe, ocorreu um erro: ".concat(e,". Por favor, tente novamente."),timestamp:new Date};l(e=>[...e,t])}finally{p(!1),null===(t=v.current)||void 0===t||t.focus()}};return(0,r.jsxs)("div",{className:(0,u.cn)("flex flex-col h-full",t),children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(e=>(0,r.jsxs)("div",{className:(0,u.cn)("flex gap-3","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-accent-500/20 border border-accent-500/30 flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-4 h-4 text-accent-500"})}),(0,r.jsxs)("div",{className:(0,u.cn)("max-w-[80%] rounded-lg px-4 py-3 shadow-lg","user"===e.role?"bg-accent-500 text-primary-50 font-medium":"bg-neutral-800/80 text-neutral-200 border border-neutral-700/50"),children:[(0,r.jsx)("div",{className:"text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:h(e.content)}}),(0,r.jsx)("span",{className:"text-xs opacity-60 mt-1 block",children:e.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),"user"===e.role&&(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-accent-500/20 border border-accent-500/30 flex items-center justify-center",children:(0,r.jsx)(o,{className:"w-4 h-4 text-accent-500"})})]},e.id)),f&&(0,r.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-accent-500/20 border border-accent-500/30 flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-4 h-4 text-accent-500"})}),(0,r.jsx)("div",{className:"bg-neutral-800/80 text-neutral-200 border border-neutral-700/50 rounded-lg px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i,{className:"w-4 h-4 animate-spin text-accent-500"}),(0,r.jsx)("span",{className:"text-sm",children:"Pensando..."})]})})]}),(0,r.jsx)("div",{ref:y})]}),g&&(0,r.jsx)("div",{className:"px-4 py-2 bg-red-500/10 border-t border-red-500/20",children:(0,r.jsx)("p",{className:"text-xs text-red-400",children:g})}),(0,r.jsxs)("div",{className:"p-4 border-t border-accent-500/20 bg-primary-100/30",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("textarea",{ref:v,value:m,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w())},placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-3 rounded-lg bg-neutral-900/60 border border-neutral-700/50 text-neutral-100 placeholder:text-neutral-500 placeholder:opacity-70 focus:outline-none focus:ring-2 focus:ring-accent-500/50 focus:border-accent-500/50 resize-none transition-all duration-200",rows:1,disabled:f,style:{minHeight:"48px",maxHeight:"120px"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height="".concat(Math.min(t.scrollHeight,120),"px")}}),(0,r.jsx)(s.z,{onClick:w,disabled:!m.trim()||f,className:"px-4 py-3 self-end",variant:"primary",children:f?(0,r.jsx)(i,{className:"w-5 h-5 animate-spin"}):(0,r.jsx)(d.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("p",{className:"text-xs text-neutral-500 mt-2 text-center opacity-60",children:"Pressione Enter para enviar â€¢ Shift+Enter para nova linha"})]})]})}},7346:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(7821),n=a(4542),s=a(2605),c=a(8078);let l=e=>"href"in e,o=e=>{let{variant:t,size:a,className:r,children:n,...s}=e;return s},i=(e,t,a)=>(0,s.W)("inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-accent-500 text-primary-50 hover:bg-accent-400 focus:ring-accent-500/50 shadow-lg shadow-accent-500/20 hover:shadow-xl hover:shadow-accent-500/30 font-display font-semibold",secondary:"bg-neutral-800 text-neutral-200 hover:bg-neutral-700 focus:ring-neutral-600 border border-neutral-700",outline:"border-2 border-accent-500 text-accent-500 hover:bg-accent-500/10 focus:ring-accent-500/50 font-display",ghost:"text-accent-500 hover:bg-accent-500/10 focus:ring-accent-500/50"}[e],{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[t],a),d=(0,c.forwardRef)((e,t)=>{let{variant:a="primary",size:s="md",className:c,children:d}=e,u=i(a,s,c);if(l(e)){let{href:a,...s}=o(e);return(0,r.jsx)(n.default,{href:a,className:u,ref:t,...s,children:d})}let h=o(e);return(0,r.jsx)("button",{ref:t,className:u,...h,children:d})});d.displayName="Button"},3892:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var r=a(2605),n=a(1638);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}},7414:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(6576).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])}},function(e){e.O(0,[485,138,115,364,744],function(){return e(e.s=419)}),_N_E=e.O()}]);